import{k as t,h as s,l as i,j as h,r as e,t as n}from"./p-3ca5d941.js";import{a as o}from"./p-59e1f273.js";const r={Auto:"Auto",Vertical:"Vertical",Horizontal:"Horizontal",Paging:"Paging"};class a{constructor(t,s={}){this._setRootComponent(t),this._initOptions(s)}_setRootComponent(t){if(!t.isUI5Element)throw new Error("The root web component must be a UI5 Element instance");this.rootWebComponent=t,this.rootWebComponent.addEventListener("keydown",this._onkeydown.bind(this)),this.rootWebComponent._onComponentStateFinalized=()=>{this._init()}}_initOptions(t){if("function"!=typeof t.getItemsCallback)throw new Error("getItemsCallback is required");this._getItems=t.getItemsCallback,this._currentIndex=t.currentIndex||0,this._rowSize=t.rowSize||1,this._behavior=t.behavior||"Static",this._navigationMode=t.navigationMode||r.Auto,this._affectedPropertiesNames=t.affectedPropertiesNames||[]}setCurrentItem(t){const s=this._getItems().indexOf(t);-1!==s?(this._currentIndex=s,this._applyTabIndex()):console.warn("The provided item is not managed by ItemNavigation",t)}setRowSize(t){this._rowSize=t}_init(){this._getItems().forEach(((t,s)=>{t._tabIndex=s===this._currentIndex?"0":"-1"}))}_onkeydown(o){if(!this._canNavigate())return;const a=this._navigationMode===r.Horizontal||this._navigationMode===r.Auto,c=this._navigationMode===r.Vertical||this._navigationMode===r.Auto;if(t(o)&&c)this._handleUp();else if(s(o)&&c)this._handleDown();else if(i(o)&&a)this._handleLeft();else if(h(o)&&a)this._handleRight();else if(e(o))this._handleHome();else{if(!n(o))return;this._handleEnd()}o.preventDefault(),this._applyTabIndex(),this._focusCurrentItem()}_handleUp(){const t=this._getItems().length;if(this._currentIndex-this._rowSize>=0)this._currentIndex-=this._rowSize;else if("Cyclic"===this._behavior){const s=this._currentIndex%this._rowSize;let i=(0===s?this._rowSize-1:s-1)+(Math.ceil(t/this._rowSize)-1)*this._rowSize;i>t-1&&(i-=this._rowSize),this._currentIndex=i}else this._currentIndex=0}_handleDown(){const t=this._getItems().length;this._currentIndex+this._rowSize<t?this._currentIndex+=this._rowSize:this._currentIndex="Cyclic"===this._behavior?(this._currentIndex%this._rowSize+1)%this._rowSize:t-1}_handleLeft(){const t=this._getItems().length;this._currentIndex>0?this._currentIndex-=1:"Cyclic"===this._behavior&&(this._currentIndex=t-1)}_handleRight(){const t=this._getItems().length;this._currentIndex<t-1?this._currentIndex+=1:"Cyclic"===this._behavior&&(this._currentIndex=0)}_handleHome(){const t=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex-=this._currentIndex%t}_handleEnd(){const t=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex+=t-1-this._currentIndex%t}_applyTabIndex(){const t=this._getItems();for(let s=0;s<t.length;s++)t[s]._tabIndex=s===this._currentIndex?"0":"-1";this._affectedPropertiesNames.forEach((t=>{const s=this.rootWebComponent[t];this.rootWebComponent[t]=Array.isArray(s)?[...s]:{...s}}))}_focusCurrentItem(){const t=this._getCurrentItem();t&&t.focus()}_canNavigate(){const t=this._getCurrentItem(),s=o();return t&&t===s}_getCurrentItem(){const t=this._getItems();if(!t.length)return null;for(;this._currentIndex>=t.length;)this._currentIndex-=this._rowSize;this._currentIndex<0&&(this._currentIndex=0);const s=t[this._currentIndex];if(s){if(s.isUI5Element)return s.getFocusDomRef();if(this.rootWebComponent.getDomRef())return this.rootWebComponent.getDomRef().querySelector(`#${s.id}`)}}}let c=null;const l=(t,s)=>{clearTimeout(c),c=setTimeout((()=>{c=null,t()}),s)};export{a as I,r as N,l as d}