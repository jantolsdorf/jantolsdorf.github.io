import{r as t,h as s,d as a}from"./p-a0a329c6.js";import{b as e}from"./p-fd454fec.js";import{s as i}from"./p-fbf9cfd5.js";import{j as c,i as l,d}from"./p-22de27ed.js";import"./p-c76dc032.js";import"./p-04b1a23c.js";import{l as r}from"./p-98a3b9a5.js";import"./p-e86956bd.js";import"./p-6ac8576c.js";import"./p-76a5b83d.js";import"./p-39e4b21b.js";import"./p-3ca5d941.js";import"./p-337430ef.js";import"./p-6e36a246.js";import"./p-617add97.js";import"./p-59e1f273.js";import"./p-7fefc54a.js";import"./p-04d005dd.js";import"./p-1cbb6fba.js";import"./p-d85e610b.js";import"./p-547388e2.js";const o=class{constructor(s){t(this,s),this.BGCOLOR="#2ecc71"}componentWillRender(){}componentDidRender(){}render(){return s("div",null,s("div",{class:"circle",style:{background:this.BGCOLOR}},s("div",{class:"circle__inner"},s("div",{class:"circle__wrapper"},s("div",{class:"circle__content"},s("slot",{name:"icon"}))))))}};var p;o.style='.circle.sc-trusd-com-circle-icon{position:relative;display:block;background-color:transparent;color:#222;text-align:center;border-radius:50%}.circle.sc-trusd-com-circle-icon:after{display:block;padding-bottom:100%;width:100%;height:0;border-radius:50%;content:""}.circle__inner.sc-trusd-com-circle-icon{position:absolute;background-color:white;border-radius:50%;top:5%;bottom:0;left:5%;width:90%;height:90%}.circle__wrapper.sc-trusd-com-circle-icon{display:table;width:100%;height:100%}.circle__content.sc-trusd-com-circle-icon{display:table-cell;vertical-align:middle}.label.sc-trusd-com-circle-icon{text-align:center}',function(t){t.percent="percent",t.fraction="fraction"}(p||(p={}));const n=class{constructor(s){t(this,s),this.Type="fraction",this.progressAmount="50",this.ProgressColor="#2ecc71"}componentWillRender(){}componentDidRender(){}render(){return s("div",null,s("div",{class:"circle",style:{background:`conic-gradient(${this.ProgressColor} ${100*this.ProgressCurrent/this.ProgressMax}%, 0, #ecf0f1 ${100-100*this.ProgressCurrent/this.ProgressMax}%)`}},s("div",{class:"circle__inner"},s("div",{class:"circle__wrapper"},s("div",{class:"circle__content"},s("small",null,this.Type==p.fraction?`${this.ProgressCurrent} / ${this.ProgressMax}`:null,this.Type==p.percent?100*this.ProgressCurrent/this.ProgressMax+"%":null))))))}};n.style='.circle.sc-trusd-com-circle-progress-bar-small{position:relative;display:block;background-color:transparent;color:#222;text-align:center;border-radius:50%}.circle.sc-trusd-com-circle-progress-bar-small:after{display:block;padding-bottom:100%;width:100%;height:0;border-radius:50%;content:""}.circle__inner.sc-trusd-com-circle-progress-bar-small{position:absolute;background-color:white;border-radius:50%;top:5%;bottom:0;left:5%;width:90%;height:90%}.circle__wrapper.sc-trusd-com-circle-progress-bar-small{display:table;width:100%;height:100%}.circle__content.sc-trusd-com-circle-progress-bar-small{display:table-cell;vertical-align:middle}.label.sc-trusd-com-circle-progress-bar-small{text-align:center}';const u=class{constructor(s){t(this,s),this.sendNewMessage=a(this,"sendNewMessage",7),this.dataBasket=new e,this.hideSendMessage=!1,this.formRadioBtnDataSource="DATA_SUBJECT",this.formRadioBtnUpdatePII=!1,this.formWidgetIsProcessingAllowed="ALLOWED",this.formWidgetMissingData=0,this.formWidgetOutdatedData=0}renderPIIDetails(t){let s=[];return t.pii.map((a=>{let l={displayName:a.dataCategory.friendlyName,lastChange:"-",dataSource:"-",isProcessingAllowed:"ALLOWED",legalBasis:null,lastChangeDate:"",available:"-"},d=i.dbEPersonalData.find((s=>"INDIVIDUAL"===t.person.type&&s.dataSubjectID===t.person.dataSubject.id&&s.dataCategoryID===a.dataCategory.id.value&&s.processingRecordEntryID===this.dataBasket.selectedProcessingRecordID));d&&d.elicitedBy===this.dataBasket.requestingDataProcessor.faculty?l.available=r.tableLabelImmediatelyAvailable:d&&(l.available=r.tableLabelAvailable);let o=c(t,a,this.dataBasket);if(l.isProcessingAllowed=o.status,l.legalBasis=o.legalBasis,"NEED_TO_ASK"===l.isProcessingAllowed&&d&&(l.isProcessingAllowed="ALLOWED"),d){if(l.lastChange=e.isPIIOudated(d),"UNKNOWN"!==l.lastChange){let t=new Date(Date.parse(d.updated));l.lastChangeDate=t.toLocaleDateString("de")}l.dataSource=d.elicitedBy?d.elicitedBy:r.notAvailableShort}s.push(l)})),s}componentWillLoad(){}componentDidLoad(){$("[data-toggle='tooltip']").tooltip()}render(){return s("div",{class:"table-responsive"},s("table",{class:"table table-hover"},s("thead",null,s("tr",null,s("th",{scope:"col"},"#"),s("th",{scope:"col"},r.tableLabelNameOfPerson),s("th",{scope:"col"},s("i",{class:"fas fa-certificate"}),r.tableLabelApproval),s("th",{scope:"col"},s("i",{class:"fas fa-tasks fa-1x"}),r.tableLabelDataCompleteness),s("th",{scope:"col"},s("i",{class:"far fa-calendar fa-1x"}),r.tableLabelDataActuality),s("th",{scope:"col"}))),s("tbody",null,this.dataBasket.dataSets.map(((t,a)=>[s("tr",{class:"cursor-pointer","data-toggle":"collapse","data-target":"#collapse"+t.id,"aria-expanded":"true","aria-controls":"collapse"+t.id},s("td",{class:"expand-button"},a+1),s("td",null,"INDIVIDUAL"===t.person.type?s("div",{class:"text-truncate",title:t.person.dataSubject.last_name+", "+t.person.dataSubject.first_name+" "+(""===t.person.dataSubject.title.trim()?"":"("+t.person.dataSubject.title.trim()+")")},s("div",{class:"row"},s("div",{class:"col-12"},s("i",{class:"fas fa-portrait fa-2x align-middle"}),"  ",t.person.dataSubject.last_name+", "+t.person.dataSubject.first_name+" "+(""===t.person.dataSubject.title.trim()?"":"("+t.person.dataSubject.title.trim()+")"))),s("div",{class:"row"},s("div",{class:"col-12"},"INTERNAL"===t.person.dataSubject.type?"":s("span",{class:"badge badge-info align-self-end cursor-help",title:r.labelExternalPersonDescripton},r.labelExternalPerson)))):s("div",{class:"text-truncate",title:t.person.dataSubjectCategory.friendlyName},s("div",{class:"row"},s("div",{class:"col-12"},s("i",{class:"fas fa-users fa-2x align-middle"}),"  ",t.person.dataSubjectCategory.friendlyName)),s("div",{class:"row"},s("div",{class:"col-12"},s("span",{class:"badge badge-info align-self-end cursor-help",title:r.labelUnspecifiedGroupDescripton},r.labelUnspecifiedGroup))))),s("td",null,s("div",{class:"cursor-help",title:"ALLOWED"===l(t,this.dataBasket)?r.labelAllowedToProcess:"NEED_TO_ASK"===l(t,this.dataBasket)?r.labelWaitingForConsent:r.labelNotAllowedToProcess},s("div",{class:"row"},s("div",{class:"col d-flex align-items-center justify-content-center"},"                                                    ","ALLOWED"===l(t,this.dataBasket)?s("div",{class:"text-center"},s("i",{class:"fas fa-check-circle fa-2x"})):"NEED_TO_ASK"===l(t,this.dataBasket)?s("div",{class:"text-center"},s("i",{class:"fas fa-exclamation-circle fa-2x"}),s("br",null),s("span",{class:"badge badge-warning align-self-end cursor-help"},r.labelPendingConsent)):"UNKNOWN"===l(t,this.dataBasket)?s("div",{class:"text-center"},s("i",{class:"fas fa-question-circle"}),s("br",null),s("span",{class:"badge badge-secondary align-self-end cursor-help"},r.labelNotDeterminable)):s("div",{class:"text-center"},s("i",{class:"fas fa-times-circle fa-2x"}),s("br",null),s("span",{class:"badge badge-danger align-self-end cursor-help"},r.labelRejected)))))),s("td",null,(()=>{let a=e.checkPIIAvailable(t,this.dataBasket);return s("div",{class:"cursor-help",title:t.pii.length-a.count==0&&a.elicitedBy===this.dataBasket.requestingDataProcessor.faculty?r.labelDataComplete:t.pii.length-a.count==0?r.labelDataAvailable:r.labelMissing+(t.pii.length-a.count)+r.labelPersonalData},s("div",{class:"row"},s("div",{class:"col d-flex align-items-center justify-content-center"},t.pii.length-a.count==0&&a.elicitedBy===this.dataBasket.requestingDataProcessor.faculty?s("div",{style:{width:"50px"}},s("trusd-com-circle-progress-bar-small",{ProgressMax:t.pii.length,ProgressCurrent:a.count})):t.pii.length-a.count==0?s("div",{style:{width:"50px"}},s("trusd-com-circle-progress-bar-small",{ProgressMax:t.pii.length,ProgressCurrent:0}),s("small",{class:"badge badge-success "},r.labelAvailable)):s("div",{style:{width:"50px"}},s("trusd-com-circle-progress-bar-small",{ProgressMax:t.pii.length,ProgressCurrent:0})))))})()),s("td",{class:"text-center"}," ",e.checkPIIAvailable(t,this.dataBasket).count>0&&"OUTDATED"===e.checkOutdatedPII(this.dataBasket,t)?s("span",{class:"badge badge-warning align-self-end cursor-help",title:r.labelOlderThan180},"älter als 180 Tage"):e.checkPIIAvailable(t,this.dataBasket).count>0&&"UNKNOWN"===e.checkOutdatedPII(this.dataBasket,t)?s("span",{class:"badge badge-warning align-self-end cursor-help",title:r.labelActualityNotDeterminable},"nicht ermittelbar"):"UNKNOWN"===e.checkOutdatedPII(this.dataBasket,t)?s("span",{class:"text-muted",title:r.labelActualityNotDeterminable},s("small",null,s("i",null,r.labelNotAvailable))):r.labelUpToDate),s("td",null,s("button",{"data-toggle":"tooltip","data-placement":"top",title:r.labelContact,type:"button",class:"btn btn-link",hidden:this.hideSendMessage,onClick:()=>this.sendNewMessage.emit(t.person)},s("i",{class:"fas fa-envelope"})))),s("tr",{class:"hide-table-padding"},s("td",null),s("td",{colSpan:5},s("div",{id:"collapse"+t.id,class:"collapse in p-3"},s("h6",null),s("table",{class:"table-details table"},s("thead",null,s("tr",null,s("th",{scope:"col",title:r.labelCategoriesPersData},s("i",{class:"fas fa-tag"})," ",r.labelCategoriesPersDataShort),s("th",{class:"text-center"},s("i",{class:"fas fa-certificate"})," ",r.tableLabelApproval),s("th",{class:"text-center"},s("i",{class:"fas fa-tasks fa-1x"})," ",r.tableLabelDataCompleteness),s("th",{class:"text-center"},s("i",{class:"far fa-calendar fa-1x"})," ",r.tableLabelDataActuality),s("th",{class:"text-center"},s("i",{class:"fas fa-database fa-1x"})," ",r.tableLabelStorageLocation))),s("tbody",null,this.renderPIIDetails(t).map((t=>s("tr",null,s("td",null,t.displayName),"ALLOWED"===t.isProcessingAllowed?s("td",{class:"text-center"},s("span",null,s("i",{class:"fas fa-check-circle fa-1x"})," ",s("trusd-piiq-com-lawfulness-simple-text",{Lawfulness:t.legalBasis}))):"NEED_TO_ASK"===t.isProcessingAllowed?s("td",{class:"text-center bg-warning"},s("span",null,s("i",{class:"fas fa-exclamation-circle fa-1x"})," ",s("trusd-piiq-com-lawfulness-simple-text",{Lawfulness:t.legalBasis}))):null!=t.legalBasis?s("td",{class:"text-center bg-danger"},s("span",null,s("i",{class:"fas fa-times-circle fa-1x"})," ",s("trusd-piiq-com-lawfulness-simple-text",{Lawfulness:t.legalBasis}))):s("td",{class:"text-center bg-warning cursor-help","data-toggle":"tooltip","data-placement":"right",title:"Die Verarbeitung dieser Daten für diese Person ist aktuell nicht möglich. Die Freigabe erfolgt durch die Datenschutzbeauftragte. Die Freigabe wird beim Versenden des Datenkorbs automatisch angefragt."},s("span",null,s("i",{class:"fas fa-user-shield"})," ",s("div",null,"Freigabe notwendig"))),s("td",{class:"text-center"},t.available),s("td",{class:"text-center"},"UPTODATE"===t.lastChange?t.lastChangeDate:"OUTDATED"===t.lastChange?s("span",{class:"badge badge-warning"},t.lastChangeDate):"-"),s("td",{class:"text-center"},t.dataSource)))))))))])))))}};u.style=".tooltips.sc-trusd-piiq-com-data-basket-data-subject-list .tooltiptext.sc-trusd-piiq-com-data-basket-data-subject-list{font-size:small;visibility:hidden;width:auto;background-color:#EEEEEE;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute !important;z-index:1000;bottom:100%;left:50%;margin-left:-60px;opacity:0;transition:opacity 1s}.tooltips.sc-trusd-piiq-com-data-basket-data-subject-list .tooltiptext.sc-trusd-piiq-com-data-basket-data-subject-list::after{content:\"\";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:black transparent transparent transparent}.tooltips.sc-trusd-piiq-com-data-basket-data-subject-list:hover .tooltiptext.sc-trusd-piiq-com-data-basket-data-subject-list{visibility:visible;opacity:1;transition:opacity 0s linear 1s;overflow:visible !important}.tooltip-arrow.sc-trusd-piiq-com-data-basket-data-subject-list,.privacy-tooltip.sc-trusd-piiq-com-data-basket-data-subject-list+.tooltip.sc-trusd-piiq-com-data-basket-data-subject-list>.tooltip-inner.sc-trusd-piiq-com-data-basket-data-subject-list{background-color:#0d5c95}.cursor-pointer.sc-trusd-piiq-com-data-basket-data-subject-list{cursor:pointer}.cursor-help.sc-trusd-piiq-com-data-basket-data-subject-list{cursor:help}button.sc-trusd-piiq-com-data-basket-data-subject-list:disabled{cursor:not-allowed;pointer-events:all !important}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list{display:block;width:100%;text-align:center}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list{display:block;position:relative;width:100%;height:40px;text-align:center}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before,.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{display:block;position:absolute;top:50%;width:50%;height:3px;margin-top:-1px;background-color:#e1e7ec;content:'';z-index:1}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before{left:0}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{right:0}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon.sc-trusd-piiq-com-data-basket-data-subject-list{display:inline-block;position:relative;width:40px;height:40px;border:1px solid #e1e7ec;border-radius:50%;background-color:#f5f5f5;color:#374250;font-size:38px;line-height:81px;z-index:5}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-title.sc-trusd-piiq-com-data-basket-data-subject-list{margin-top:5px;margin-bottom:0;color:#606975;font-size:14px;font-weight:500}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list:first-child .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before{display:none}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list:last-child .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{display:none}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.completed.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before,.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.completed.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{background-color:#0da9ef}.steps.sc-trusd-piiq-com-data-basket-data-subject-list .step.completed.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon.sc-trusd-piiq-com-data-basket-data-subject-list{border-color:#0da9ef;background-color:#0da9ef;color:#fff}@media (max-width: 576px){.flex-sm-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before,.flex-sm-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{display:none}}@media (max-width: 768px){.flex-md-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before,.flex-md-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{display:none}}@media (max-width: 991px){.flex-lg-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before,.flex-lg-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{display:none}}@media (max-width: 1200px){.flex-xl-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::before,.flex-xl-nowrap.sc-trusd-piiq-com-data-basket-data-subject-list .step.sc-trusd-piiq-com-data-basket-data-subject-list .step-icon-wrap.sc-trusd-piiq-com-data-basket-data-subject-list::after{display:none}}.bg-faded.sc-trusd-piiq-com-data-basket-data-subject-list,.bg-secondary.sc-trusd-piiq-com-data-basket-data-subject-list{background-color:#f5f5f5 !important}tr.hide-table-padding.sc-trusd-piiq-com-data-basket-data-subject-list td.sc-trusd-piiq-com-data-basket-data-subject-list{padding:0}.expand-button.sc-trusd-piiq-com-data-basket-data-subject-list{position:relative}.accordion-toggle.sc-trusd-piiq-com-data-basket-data-subject-list .expand-button.sc-trusd-piiq-com-data-basket-data-subject-list:after{position:absolute;left:.75rem;top:50%;transform:translate(0, -50%);content:'-'}.accordion-toggle.collapsed.sc-trusd-piiq-com-data-basket-data-subject-list .expand-button.sc-trusd-piiq-com-data-basket-data-subject-list:after{content:'+'}th.sc-trusd-piiq-com-data-basket-data-subject-list{font-weight:normal}.table.sc-trusd-piiq-com-data-basket-data-subject-list td.sc-trusd-piiq-com-data-basket-data-subject-list{vertical-align:middle}";const b=class{constructor(s){t(this,s)}componentWillRender(){}componentDidRender(){}render(){return s("div",null,this.Lawfulness.type==d.VOLawfulnessTypeEnum.A?s("div",{"data-toggle":"tooltip","data-placement":"right",title:"(DSGVO Art. 6 (1) a)"},"Einwilligung"):null,this.Lawfulness.type==d.VOLawfulnessTypeEnum.B?s("div",{"data-toggle":"tooltip","data-placement":"right",title:"(DSGVO Art. 6 (1) b)"},"Erfüllung eines Vertrags"):null,this.Lawfulness.type==d.VOLawfulnessTypeEnum.C?s("div",{"data-toggle":"tooltip","data-placement":"right",title:"(DSGVO Art. 6 (1) c)"},"Rechtliche Verpflichtung"):null,this.Lawfulness.type==d.VOLawfulnessTypeEnum.D?s("div",{"data-toggle":"tooltip","data-placement":"right",title:"(DSGVO Art. 6 (1) d)"},"Lebenswichtige Interessen"):null,this.Lawfulness.type==d.VOLawfulnessTypeEnum.E?s("div",{"data-toggle":"tooltip","data-placement":"right",title:"(DSGVO Art. 6 (1) e)"},"Höhere Gewalt"):null,this.Lawfulness.type==d.VOLawfulnessTypeEnum.F?s("div",{"data-toggle":"tooltip","data-placement":"right",title:"(DSGVO Art. 6 (1) f)"},"Berechtigte Interessen"):null)}};b.style="";export{o as trusd_com_circle_icon,n as trusd_com_circle_progress_bar_small,u as trusd_piiq_com_data_basket_data_subject_list,b as trusd_piiq_com_lawfulness_simple_text}