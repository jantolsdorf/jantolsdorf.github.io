export{D as trusd_piiq_com_data_basket_import_edit}from"./p-104ccf9e.js";import{r as t,d as e,h as s,g as i}from"./p-a0a329c6.js";import{f as a}from"./p-eb590766.js";import{l as n}from"./p-98a3b9a5.js";import{b as o,d as l}from"./p-fd454fec.js";import{s as c}from"./p-fbf9cfd5.js";import"./p-d85e610b.js";import"./p-fd76076a.js";import"./p-6e36a246.js";import"./p-3a909602.js";import{f as r,a as d,b as p,e as u,h,d as b}from"./p-22de27ed.js";import{D as m}from"./p-9643fe7c.js";export{D as trusd_piiq_com_data_basket_step_2}from"./p-9643fe7c.js";import"./p-c76dc032.js";import"./p-04b1a23c.js";import{V as g}from"./p-6ac8576c.js";import"./p-59e1f273.js";import"./p-76a5b83d.js";import"./p-3ca5d941.js";import"./p-1b0a7c96.js";import"./p-cf4d8a40.js";import"./p-337430ef.js";import"./p-eaf837f7.js";import"./p-547388e2.js";import"./p-39e4b21b.js";import"./p-617add97.js";import"./p-7fefc54a.js";import"./p-04d005dd.js";import"./p-7b428ec7.js";import"./p-777a3b09.js";import"./p-1cbb6fba.js";const f=class{constructor(s){t(this,s),this.completed=e(this,"completed",7),this.baseUrl="",this.processingRecords=[],this.renderedProcessingRecords=this.processingRecords,this.filterSearchProcessingRecords="",this.update=0,this.dataBasket=new o}itemClickHandler(t){this.dataBasket.selectedProcessingRecordID=t.detail.selectedItems[0].id,this.update++}itemDeleteHandler(){this.dataBasket.selectedProcessingRecordID="",this.update++}componentWillLoad(){this.dataBasket.isNewProcessingRecordEntry=!1,this.dataBasket.activityLog.addCreated(this.dataBasket.requestingDataProcessor.last_name+", "+this.dataBasket.requestingDataProcessor.first_name)}componentDidLoad(){this.processingRecords=c.dbEProcessingRecordEntry,console.log(this.processingRecords[0].id)}componentWillRender(){this.renderedProcessingRecords=this.processingRecords,""!==this.filterSearchProcessingRecords&&(this.renderedProcessingRecords=this.processingRecords.filter((t=>{let e=a.flatten(t);for(let t in e)if(("string"==typeof e[t]||e instanceof String)&&e[t].toLowerCase().includes(this.filterSearchProcessingRecords.toLowerCase()))return!0})))}componentDidRender(){if(void 0!==this.dataBasket.selectedProcessingRecordID){this.selectedItem.querySelectorAll("ui5-list[id='select-purpose'] > ui5-li").forEach((t=>{t.selected=!1}));let t=this.selectedItem.querySelector("ui5-li[id='"+this.dataBasket.selectedProcessingRecordID+"']");t&&(t.selected=!0)}}render(){return s("div",{class:"container-fluid"},s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Bitte wählen Sie den Zweck oder die Grundlage der geplanten Datenverarbeitungsaktivität aus:*"),s("div",{class:"row",hidden:!0},s("ui5-radiobutton",{text:"Standard (bereits genehmigte Zwecke)",selected:!this.dataBasket.isNewProcessingRecordEntry,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{isNewProcessingRecordEntry:!1}),name:"GroupPurposeSelection"}),s("ui5-radiobutton",{text:"Neuer Zweck oder Zweck selbst festlegen",selected:this.dataBasket.isNewProcessingRecordEntry,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{isNewProcessingRecordEntry:!0}),name:"GroupPurposeSelection"})),s("div",null,this.dataBasket.isNewProcessingRecordEntry?s("ui5-messagestrip",{type:"Information","no-icon":!0,"no-close-button":!0},s("p",null,s("b",null,"Hinweis")),"Neue Zwecke müssen durch den Datenschutzbeauftragten geprüft und genehmigt werden. Sie sollten diese Option daher nur wählen, wenn Ihre geplante Verarbeitungsaktivität noch nicht im Verzeichnis hinterlegt ist."):""===this.dataBasket.selectedProcessingRecordID?s("div",{class:"col-12 card-block text-center trusd-button-select",onClick:()=>document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")},s("div",{class:"file text-center align-middle"},s("p",null),s("span",{class:"text-primary"},s("i",{class:"fas fa-hand-pointer"}),"  Zweck oder Grundlage auswählen"),s("p",null))):s("div",{class:"row"},s("div",{class:"col"},s("ui5-list",{mode:"Delete"},s("ui5-li",{class:"col-12",selected:!0,description:this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID)).purposes.map((t=>" "+t.displayName))},this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID)).friendlyName))),s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})))),s("trusd-com-modal-window",null,s("span",{slot:"modal-title"},"Verzeichnis von genehmigten Datenverarbeitungsaktivitäten"),s("div",{slot:"modal-content"},s("div",{class:"d-flex justify-content-center"},s("input",{type:"text",class:"form-control",onInput:t=>{this.filterSearchProcessingRecords=t.target.value},placeholder:n.placeholderSearch})),s("ui5-list",{id:"select-purpose",growing:"Scroll",mode:"SingleSelect"},this.renderedProcessingRecords.map((t=>s("ui5-li",{id:t.id.value,description:t.purposes.map((t=>" "+t.displayName)),info:t.friendlyName.includes("Erfindung")?"häufig verwendet":"","info-state":"Success"},t.friendlyName)))),this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))?s("div",{class:"col-12 mt-3 border shadow bg-light"},s("div",null,s("div",{class:"row"},s("div",{class:"col-12"},s("h5",{class:"lead"},"Übersicht der ausgewählten Verarbeitungstätigkeit"))),s("div",{class:"row"},s("div",{class:"col-12 mb-3"},s("h6",null,"Gestatte Zwecke"),r(this.dataBasket.selectedProcessingRecordID).purposes.map((t=>s("ui5-panel",{collapsed:!0},s("div",{slot:"header"},t.displayName),t.descriptionText)))),s("div",{class:"col-sm-4 col-lg-4 text-truncate"},s("p",{class:""},s("i",{class:"fas fa-user-tag fa-1x",title:"Kategorien möglicher betroffener Personen"})," Kat. betroffene Personen"),(()=>this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))?d(this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))):[])().map((t=>s("li",null,t.friendlyName)))),s("div",{class:"col-sm-4 col-lg-4 text-truncate"},s("p",{class:""},s("i",{class:"fas fa-tags fa-1x ",title:"Kategorien der personenbezogenen Daten"})," Kat. personenbezogener Daten"),(()=>this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))?p(this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))):[])().map((t=>s("li",null,t.friendlyName)))),s("div",{class:"col-sm-4 col-lg-4 text-truncate"},s("p",{class:""},s("i",{class:"fas fa-gavel fa-1x",title:"Rechtsgrundlage"})," Rechtsgrundlage"),(()=>this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))?u(this.processingRecords.find((t=>t.id.value===this.dataBasket.selectedProcessingRecordID))):[])().map((t=>s("li",null,"DSGVO Art. 6 (1) ",t.type.toLowerCase()))))))):""),s("div",{slot:"modal-footer"},s("button",{type:"button",class:"btn btn-secondary",onClick:()=>{this.dataBasket.selectedProcessingRecordID="",document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")}},n.btnCancel)," ",s("button",{type:"button",class:"btn btn-primary",onClick:()=>document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")},n.btnSave))))),s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Bitte geben Sie der geplanten Datenverarbeitungsaktivität einen Namen:*"),s("div",{class:"row"},s("div",{class:"col"},s("input",{type:"text",class:"form-control",onInput:t=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{title:t.target.value}),placeholder:"z. B.: Abschlussbericht, Forschungsantrag Projekt, Einstellung Frau Freudscheidt, ..."})),""!==this.dataBasket.title?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""))),s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Bitte beschreiben Sie möglichst genau, wofür Sie die Daten verarbeiten möchten:*"),s("div",{class:"row"},s("div",{class:"col"},s("textarea",{id:"description",class:"form-control","aria-label":"With textarea",value:this.dataBasket.description,onInput:t=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{description:t.target.value}),placeholder:"z. B.: Erstellen und Verwalten der Teilnehmerliste für die Veranstaltung am Donnerstag."})),""!==this.dataBasket.description?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""))),s("div",{class:"row pt-3"},s("div",{class:"col d-flex flex-row-reverse bd-highlight"},s("button",{onClick:()=>this.completed.emit(this.dataBasket),type:"button",class:"btn btn-primary float-right",disabled:""===this.dataBasket.title||""===this.dataBasket.selectedProcessingRecordID||""===this.dataBasket.description,"data-toggle":"collapse","data-target":".multi-collapse","aria-expanded":"true","aria-controls":"collapseOne collapseTwo"}," Daten und Personen auswählen   ",s("i",{class:"fas fa-chevron-right"})))))}get selectedItem(){return i(this)}};f.route="/vorlagen/datenkorb",f.style='.tooltips.sc-trusd-piiq-com-data-basket-step-1 .tooltiptext.sc-trusd-piiq-com-data-basket-step-1{font-size:small;visibility:hidden;width:auto;background-color:#EEEEEE;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute !important;z-index:1000;bottom:100%;left:50%;margin-left:-60px;opacity:0;transition:opacity 1s}.tooltips.sc-trusd-piiq-com-data-basket-step-1 .tooltiptext.sc-trusd-piiq-com-data-basket-step-1::after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:black transparent transparent transparent}.tooltips.sc-trusd-piiq-com-data-basket-step-1:hover .tooltiptext.sc-trusd-piiq-com-data-basket-step-1{visibility:visible;opacity:1;transition:opacity 0s linear 1s;overflow:visible !important}.tooltip-arrow.sc-trusd-piiq-com-data-basket-step-1,.privacy-tooltip.sc-trusd-piiq-com-data-basket-step-1+.tooltip.sc-trusd-piiq-com-data-basket-step-1>.tooltip-inner.sc-trusd-piiq-com-data-basket-step-1{background-color:#0d5c95}.cursor-pointer.sc-trusd-piiq-com-data-basket-step-1{cursor:pointer}.cursor-help.sc-trusd-piiq-com-data-basket-step-1{cursor:help}button.sc-trusd-piiq-com-data-basket-step-1:disabled{cursor:not-allowed;pointer-events:all !important}.sc-trusd-piiq-com-data-basket-step-1-h{display:block}#search-input.sc-trusd-piiq-com-data-basket-step-1{width:100%}#topic-assignments.sc-trusd-piiq-com-data-basket-step-1{width:100%;height:100%}#title-input.sc-trusd-piiq-com-data-basket-step-1{width:100%}.search-input-icon.sc-trusd-piiq-com-data-basket-step-1{background:#fafafa;color:#0a6ed1;cursor:pointer}.search-input-icon.sc-trusd-piiq-com-data-basket-step-1:hover{background:rgba(224,224,224,0.5)}.card-block.sc-trusd-piiq-com-data-basket-step-1{border:1px solid lightgrey;border-radius:2px !important;background-color:#FAFAFA;padding:10px}.trusd-button-select.sc-trusd-piiq-com-data-basket-step-1:hover{cursor:pointer;border:1px solid #007BFF}';const v=class{constructor(s){t(this,s),this.completed=e(this,"completed",7),this.back=e(this,"back",7),this.baseUrl="",this.dataBasket=new o,this.formRadioBtnUpdatePII=!1,this.formWidgetIsProcessingAllowed="ALLOWED",this.formWidgetMissingData=0,this.formWidgetOutdatedData=0,this.formSearchStringContacts="",this.filterNameDataSubjects="A-Z",this.mappingTransmissionChannelInput=[{key:l.EMAIL,value:"E-Mail"},{key:l.INHOUSE_MAIL,value:"Hauspost"},{key:l.FILE_UPLOAD,value:"Datei Upload"},{key:l.FAX,value:"Fax"}]}handleOnChangeTransmissionChannel(t){t.target.checked&&-1===this.dataBasket.transmissionChannel.indexOf(t.target.value)?this.dataBasket.transmissionChannel.push(t.target.value):!t.target.checked&&this.dataBasket.transmissionChannel.indexOf(t.target.value)>=0&&this.dataBasket.transmissionChannel.splice(this.dataBasket.transmissionChannel.indexOf(t.target.value),1)}isProcessingAllowed(t){let e="ALLOWED";return"INDIVIDUAL"===t.person.type?t.pii.forEach((s=>{if("NEED_TO_ASK"===e||"OBJECTED"===e)return;let i=h(r(this.dataBasket.selectedProcessingRecordID),{value:"INTERNAL"===t.person.dataSubject.type?"data_subject_cat_1":"data_subject_cat_2"},s.dataCategory.id);return i&&i.type===b.VOLawfulnessTypeEnum.A?void(e="NEED_TO_ASK"):void(e="ALLOWED")})):e="UNKNOWN",e}startProcessing(){this.dataBasket.dataSets.forEach((t=>{this.dataBasket=o.addToConversations(this.dataBasket,t.person,"123Neue Anfrage gestartet: "+(()=>{let e="";return t.pii.forEach((t=>e+=t.dataCategory.friendlyName+", ")),e.substring(0,e.length-2)})(),{name:this.dataBasket.requestingDataProcessor.last_name+", "+this.dataBasket.requestingDataProcessor.first_name,id:"data-processor-1"})})),"DATA_SUBJECT"===this.dataBasket.requestDataRequestedFrom&&""!==this.dataBasket.requestPersonalMessageToDataSubjects?this.dataBasket.dataSets.forEach((t=>{this.dataBasket=o.addToConversations(this.dataBasket,t.person,this.dataBasket.requestPersonalMessageToDataSubjects,{name:this.dataBasket.requestingDataProcessor.last_name+", "+this.dataBasket.requestingDataProcessor.first_name,id:"data-processor-1"})})):"FROM_OTHER"===this.dataBasket.requestDataRequestedFrom&&""!==this.dataBasket.requestPersonalMessageToPersonOrDepartment&&(this.dataBasket=o.addToConversations(this.dataBasket,g.fromDataSubject(this.dataBasket.dataSourcePersonOrDepartment),this.dataBasket.requestPersonalMessageToPersonOrDepartment,{name:this.dataBasket.requestingDataProcessor.last_name+", "+this.dataBasket.requestingDataProcessor.first_name,id:"data-processor-1"})),this.completed.emit(this.dataBasket)}getInternalDataSubjects(t){let e=c.dbEDataSubjects.filter((t=>"INTERNAL"===t.type));return t&&(this.formSearchStringContacts&&this.formSearchStringContacts.split(" ").forEach((t=>{e=e.filter((e=>e.full_name.toLowerCase().includes(t.toLowerCase())||e.faculty.toLowerCase().includes(t.toLowerCase())||e.job.toString().toLowerCase().includes(t.toLowerCase())||e.title.toString().toLowerCase().includes(t.toLowerCase())))})),"A-Z"===this.filterNameDataSubjects?e=e.sort((function(t,e){return t.last_name+" "+t.first_name<e.last_name+" "+e.first_name?-1:t.last_name+" "+t.first_name>e.last_name+" "+e.first_name?1:0})):"Z-A"===this.filterNameDataSubjects&&(e=e.sort((function(t,e){return t.last_name+" "+t.first_name>e.last_name+" "+e.first_name?-1:t.last_name+" "+t.first_name<e.last_name+" "+e.first_name?1:0})))),e}componentWillRender(){}componentWillLoad(){this.dataBasket.transmissionChannel&&0!=this.dataBasket.transmissionChannel.length||(this.dataBasket.transmissionChannel=[l.FILE_UPLOAD,l.EMAIL]),this.formReccommendedByDataBasket=o.getBestSourceForPersonalData(this.dataBasket),this.dataBasket.dataSets.map((t=>{o.checkPIIAvailable(t,this.dataBasket).count<t.pii.length&&(this.formWidgetMissingData+=1)})),this.dataBasket.dataSets.map((t=>{"OUTDATED"===o.checkOutdatedPII(this.dataBasket,t)&&(this.formWidgetOutdatedData+=1)}));for(let t=0;t<this.dataBasket.dataSets.length;t++){const e=this.isProcessingAllowed(this.dataBasket.dataSets[t]);if("UNKNOWN"===e||"OBJECTED"===e||"NEED_TO_ASK"===e)return void(this.formWidgetIsProcessingAllowed=e)}this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{requestDataRequestedFrom:(this.formWidgetMissingData>0||this.formWidgetOutdatedData>0)&&this.dataBasket.requestingDataProcessor.faculty!==this.formReccommendedByDataBasket.elictedBy?this.formReccommendedByDataBasket.bestOption:"DATA_SUBJECT",dataSourcePersonOrDepartment:(this.formWidgetMissingData>0||this.formWidgetOutdatedData>0)&&this.dataBasket.requestingDataProcessor.faculty!==this.formReccommendedByDataBasket.elictedBy?c.dbEDataSubjects.find((t=>t.faculty===this.formReccommendedByDataBasket.elictedBy)):null})}componentDidLoad(){$("[data-toggle='tooltip']").tooltip()}render(){if(null!=this.dataBasket)return s("div",{class:"container"},s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Verfügbarkeit")),s("div",{class:"col-lg-3 col-xs-10 ml-3 p-1 bg-light rounded cursor-help"},this.formWidgetMissingData>0?s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Für "+this.formWidgetMissingData+" Person(en) liegen die angefragten personenbezogenen Daten nicht vor und müssen abgefragt werden."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#dc3545"},s("div",{class:"d-flex align-items-center justify-content-center text-danger",slot:"icon"},s("span",null,this.formWidgetMissingData)))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Unvollständig")))):this.formReccommendedByDataBasket.elictedBy!==this.dataBasket.requestingDataProcessor.faculty?s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Alle angefragten Daten stehen in einer anderen Abteilung zur Verfügung und werden Ihnen zur Verfügung gestellt."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#2ecc71"},s("div",{class:"d-flex align-items-center justify-content-center text-success",slot:"icon"},s("i",{class:"fas fa-check fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Vorrätig auf Anfrage")))):s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Alle angefragten Daten sind vollständig und stehen Ihnen sofort zur Verfügung."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#2ecc71"},s("div",{class:"d-flex align-items-center justify-content-center text-success",slot:"icon"},s("i",{class:"fas fa-check fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Vollständig"))))),s("div",{class:"col-lg-3 col-xs-10 ml-3 p-1 bg-light rounded cursor-help"},"ALLOWED"===this.formWidgetIsProcessingAllowed?s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Sie dürfen die ausgewählten personenbezogenen Daten verarbeiten."},s("div",{class:"row ml-0"},s("div",{class:"col-3 tooltips"},s("trusd-com-circle-icon",{BGCOLOR:"#2ecc71"},s("div",{class:"d-flex align-items-center justify-content-center text-success",slot:"icon"},s("i",{class:"fas fa-check fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Genehmigt")))):"NEED_TO_ASK"===this.formWidgetIsProcessingAllowed?s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Einige betroffene Personen müssen in die Verarbeitung einwilligen, bevor Sie die personenbezogenen Daten verarbeiten dürfen."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#ffd43b"},s("div",{class:"d-flex align-items-center justify-content-center text-warning",slot:"icon"},s("i",{class:"fas fa-exclamation fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Fehlende Genehmigung")))):"UNKNOWN"===this.formWidgetIsProcessingAllowed?s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Es konnte nicht ermittelt werden, ob eine Genehmigung vorliegt oder nicht."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#000"},s("div",{class:"d-flex align-items-center justify-content-center",slot:"icon"},s("i",{class:"fas fa-question fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Unbekannt")))):s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Die Verarbeitung der Daten wurden von einigen betroffenen Personen abgelehnt."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#dc3545"},s("div",{class:"d-flex align-items-center justify-content-center text-danger",slot:"icon"},s("i",{class:"fas fa-times fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Abgelehnt"))))),this.formWidgetOutdatedData>0?s("div",{class:"col-lg-3 col-xs-10 ml-3 p-1 bg-light rounded cursor-help"},s("div",{"data-toggle":"tooltip","data-placement":"bottom",title:"Bei "+this.formWidgetOutdatedData+" Person(en) sind die verfügbaren personenbezogenen eventuell veraltet."},s("div",{class:"row ml-0"},s("div",{class:"col-3"},s("trusd-com-circle-icon",{BGCOLOR:"#ffd43b"},s("div",{class:"d-flex align-items-center justify-content-center text-warning",slot:"icon"},s("i",{class:"fas fa-calendar-times fa-1x"})))),s("div",{class:"col-9 text-center"},s("div",{class:"d-flex align-items-center justify-content-center h-100"},"Veraltete Daten"))))):"",s("div",{class:"col-12 pt-3"},s("details",null,s("summary",{class:"pl-2 btn-outline-primary border rounded"},"Details anzeigen (",this.dataBasket.dataSets.length," betroffene Person(en))"),this.dataBasket.dataSets.length>0?s("div",{class:"row p-3 m-0 bg-light overflow-auto",style:{maxHeight:"70vh"}},s("trusd-piiq-com-data-basket-data-subject-list",{hideSendMessage:!0,class:"w-100",dataBasket:this.dataBasket})):s("div",{class:"row"},s("div",{class:"col-3"}),s("div",{class:"col-6"},s("p",{class:"text-center font-italic w-100"},"Bitte wählen Sie oben die personenbezogenen Daten und die betroffenen Personen aus und fügen Sie Ihre Auswahl anschließend dem Datenkorb hinzu.")),s("div",{class:"col-3"}))))),this.formWidgetOutdatedData>0?s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Sollen die betroffenen Personen nach einer Aktualisierung der Daten gefragt werden?*"),s("div",{class:"row"},s("div",{class:"col"},s("ui5-radiobutton",{text:"Ja, betroffene Personen nach Aktualisierung fragen.",selected:this.dataBasket.isAskToUpdateOutdatedPII,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{isAskToUpdateOutdatedPII:!0,requestDataRequestedFrom:"DATA_SUBJECT"}),name:"GroupRadioBtnUpdatePII"}),s("ui5-radiobutton",{text:"Nein, keine Aktualisierung der Daten anfragen.",selected:!this.dataBasket.isAskToUpdateOutdatedPII,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{isAskToUpdateOutdatedPII:!1}),name:"GroupRadioBtnUpdatePII"})),this.dataBasket.isAskToUpdateOutdatedPII||!this.dataBasket.isAskToUpdateOutdatedPII?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""))):"",this.formWidgetMissingData>0||this.formReccommendedByDataBasket.elictedBy!==this.dataBasket.requestingDataProcessor.faculty?s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Wie sollen die"+(this.formWidgetMissingData>0?" nicht verfügbaren":"")+" Daten eingeholt werden?*"),this.formReccommendedByDataBasket.bestOption===this.dataBasket.requestDataRequestedFrom?s("p",null,s("small",null,s("i",null,"Aktuell ist die vom Datenkorb automatisch ermittelte Option ausgewählt."))):"",s("div",{class:"row"},s("div",{class:"col"},s("ui5-radiobutton",{text:"Direkt bei den betroffenen Personen anfragen.",selected:"DATA_SUBJECT"===this.dataBasket.requestDataRequestedFrom,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{requestDataRequestedFrom:"DATA_SUBJECT"}),name:"GroupPurposeSelection"}),s("ui5-radiobutton",{text:"Von einer bestimmten Person / Abteilung anfragen.",selected:"FROM_OTHER"===this.dataBasket.requestDataRequestedFrom,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{requestDataRequestedFrom:"FROM_OTHER"}),name:"GroupPurposeSelection",disabled:this.dataBasket.isAskToUpdateOutdatedPII}),s("ui5-radiobutton",{text:"Ich frage die Daten anderweitig selbst an.",selected:"SELF"===this.dataBasket.requestDataRequestedFrom,onSelect:()=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{requestDataRequestedFrom:"SELF"}),name:"GroupPurposeSelection",disabled:this.dataBasket.isAskToUpdateOutdatedPII})),"DATA_SUBJECT"===this.dataBasket.requestDataRequestedFrom||"SELF"===this.dataBasket.requestDataRequestedFrom?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""),"FROM_OTHER"!==this.dataBasket.requestDataRequestedFrom&&"SELF"!==this.dataBasket.requestDataRequestedFrom||"NEED_TO_ASK"!==this.formWidgetIsProcessingAllowed?null:s("div",{class:"col-12 pb-3"},s("ui5-messagestrip",{type:"Information",onClose:t=>t.target.hidden=!0},s("p",null,s("b",null,"Hinweis!")),s("p",null,"Dies ersetzt ",s("u",null,"nicht")," die Notwendigkeit Einwilligungen einzuholen."),s("p",null,"Einwilligungen werden für Hochschulangehörige und externe Personen über die hinterlegte E-Mail Adresse automatisch angefragt."),"Falls die Einwilligungen nicht automatisch eingeholt werden können, müssen Sie diese selbst einholen. Fragen Sie hierzu z. B. den Datenschutzbeauftragten.")),"FROM_OTHER"===this.dataBasket.requestDataRequestedFrom?s("div",null,s("div",null,this.dataBasket.dataSourcePersonOrDepartment?s("div",{class:"row"},s("div",{class:"col"},s("ui5-list",null,s("ui5-li",{class:"col-12",selected:!0,description:this.dataBasket.dataSourcePersonOrDepartment?this.dataBasket.dataSourcePersonOrDepartment.faculty:"",onClick:()=>document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")},this.dataBasket.dataSourcePersonOrDepartment?this.dataBasket.dataSourcePersonOrDepartment.last_name+", "+this.dataBasket.dataSourcePersonOrDepartment.first_name:""))),s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"}))):s("div",{class:"col-12 card-block text-center trusd-button-select cursor-pointer",onClick:()=>document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")},s("div",{class:"file text-center align-middle"},s("p",null),s("span",{class:"text-primary"},s("i",{class:"far fa-address-book"}),"  Person oder Abteilung aus Adressbuch auswählen"),s("p",null))))):"")):"",!(this.formWidgetMissingData>0||this.formRadioBtnUpdatePII||this.formReccommendedByDataBasket.elictedBy!==this.dataBasket.requestingDataProcessor.faculty)||"DATA_SUBJECT"!==this.dataBasket.requestDataRequestedFrom&&"FROM_OTHER"!==this.dataBasket.requestDataRequestedFrom?"":s("div",null,"DATA_SUBJECT"===this.dataBasket.requestDataRequestedFrom?s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Persönliche Nachricht an die ",s("b",null,"betroffenen Personen")," (optional):"),s("div",{class:"row"},s("div",{class:"col"},s("textarea",{id:"description",class:"form-control","aria-label":"With textarea",value:this.dataBasket.requestPersonalMessageToDataSubjects,onInput:t=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{requestPersonalMessageToDataSubjects:t.target.value})})),this.dataBasket.requestPersonalMessageToDataSubjects&&""!==this.dataBasket.requestPersonalMessageToDataSubjects?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""))):"FROM_OTHER"===this.dataBasket.requestDataRequestedFrom?s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Persönliche Nachricht an die ausgewählte ",s("b",null,"Kontaktperson oder Abteilung")," (optional):"),s("div",{class:"row"},s("div",{class:"col"},s("textarea",{id:"description",class:"form-control","aria-label":"With textarea",value:this.dataBasket.requestPersonalMessageToPersonOrDepartment,onInput:t=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{requestPersonalMessageToPersonOrDepartment:t.target.value})})),this.dataBasket.requestPersonalMessageToPersonOrDepartment&&""!==this.dataBasket.requestPersonalMessageToPersonOrDepartment?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""))):""),!(this.formWidgetMissingData>0||this.formRadioBtnUpdatePII||this.formReccommendedByDataBasket.elictedBy!==this.dataBasket.requestingDataProcessor.faculty)||"DATA_SUBJECT"!==this.dataBasket.requestDataRequestedFrom&&"FROM_OTHER"!==this.dataBasket.requestDataRequestedFrom?"":s("div",{class:"row p-2 mt-3 bg-white rounded border"},s("div",{class:"col-12"},s("label",{class:"lead"},"Bis wann benötigen Sie die pers. Daten und Genehmigungen? (optional)"),s("div",{class:"row"},s("div",{class:"col"},s("ui5-date-picker",{id:"deadline",placeholder:"TT.MM.JJJJ","format-pattern":"dd.MM.yyyy",value:this.dataBasket.deadline,onChange:t=>this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{deadline:t.target.value})})),this.dataBasket.deadline&&""!==this.dataBasket.deadline?s("div",{class:"d-flex align-items-center justify-content-center"},s("span",{class:"fas fa-check-circle text-success"})):""))),s("trusd-com-modal-window",null,s("span",{slot:"modal-title"},"Hochschulangehörige Personen"),s("div",{slot:"modal-content"},s("div",{class:"d-flex justify-content-center"},s("input",{type:"text",class:"form-control",onInput:t=>{this.formSearchStringContacts=t.target.value},placeholder:n.placeholderSearch})),s("ui5-list",{id:"select-purpose",growing:"Scroll",mode:"SingleSelect",style:{height:"300px"}},this.getInternalDataSubjects(!0).map((t=>s("ui5-li",{id:t.id,description:t.faculty,"info-state":"Success",onClick:t=>{this.dataBasket=Object.assign(Object.assign({},this.dataBasket),{dataSourcePersonOrDepartment:c.dbEDataSubjects.find((e=>e.id===t.target.id))}),document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")}},t.last_name+", "+t.first_name))))),s("div",{slot:"modal-footer"},s("button",{type:"button",class:"btn btn-secondary",onClick:()=>{this.formSearchStringContacts="",document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")}},n.btnCancel)," ")),s("div",{class:"row pt-3"},s("div",{class:"col"},s("button",{onClick:()=>this.back.emit(),type:"button",class:"btn btn-secondary float-left","data-toggle":"collapse","data-target":".multi-collapse","aria-expanded":"true","aria-controls":"collapseOne collapseTwo"},s("i",{class:"fas fa-chevron-left"}),"   ",n.btnBack),s("button",{onClick:()=>this.startProcessing(),type:"button",class:"btn btn-primary float-right","data-toggle":"collapse","data-target":".multi-collapse","aria-expanded":"true","aria-controls":"collapseOne collapseTwo"},n.btnNext,"   ",s("i",{class:"fas fa-chevron-right"})))));this.history.replace(m.route)}};v.route="/details-bearbeiten",v.style='.tooltips.sc-trusd-piiq-com-data-basket-step-3 .tooltiptext.sc-trusd-piiq-com-data-basket-step-3{font-size:small;visibility:hidden;width:auto;background-color:#EEEEEE;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute !important;z-index:1000;bottom:100%;left:50%;margin-left:-60px;opacity:0;transition:opacity 1s}.tooltips.sc-trusd-piiq-com-data-basket-step-3 .tooltiptext.sc-trusd-piiq-com-data-basket-step-3::after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:black transparent transparent transparent}.tooltips.sc-trusd-piiq-com-data-basket-step-3:hover .tooltiptext.sc-trusd-piiq-com-data-basket-step-3{visibility:visible;opacity:1;transition:opacity 0s linear 1s;overflow:visible !important}.tooltip-arrow.sc-trusd-piiq-com-data-basket-step-3,.privacy-tooltip.sc-trusd-piiq-com-data-basket-step-3+.tooltip.sc-trusd-piiq-com-data-basket-step-3>.tooltip-inner.sc-trusd-piiq-com-data-basket-step-3{background-color:#0d5c95}.cursor-pointer.sc-trusd-piiq-com-data-basket-step-3{cursor:pointer}.cursor-help.sc-trusd-piiq-com-data-basket-step-3{cursor:help}button.sc-trusd-piiq-com-data-basket-step-3:disabled{cursor:not-allowed;pointer-events:all !important}.sc-trusd-piiq-com-data-basket-step-3-h{display:block}*.sc-trusd-piiq-com-data-basket-step-3{text-align:left}.card-block.sc-trusd-piiq-com-data-basket-step-3{border:1px solid lightgrey;border-radius:2px !important;background-color:#FAFAFA;padding:10px}.trusd-button-select.sc-trusd-piiq-com-data-basket-step-3:hover{cursor:pointer;border:1px solid #007BFF}';export{f as trusd_piiq_com_data_basket_step_1,v as trusd_piiq_com_data_basket_step_3}