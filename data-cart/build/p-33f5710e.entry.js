import{r as t,d as s,h as e,g as i}from"./p-a0a329c6.js";import{f as o}from"./p-eb590766.js";import"./p-d85e610b.js";import"./p-fd76076a.js";import"./p-6e36a246.js";import"./p-3a909602.js";import{l as a}from"./p-98a3b9a5.js";import{s as r}from"./p-fbf9cfd5.js";import"./p-76a5b83d.js";import"./p-3ca5d941.js";import"./p-59e1f273.js";import"./p-cf4d8a40.js";import"./p-337430ef.js";import"./p-eaf837f7.js";import"./p-547388e2.js";import"./p-39e4b21b.js";import"./p-617add97.js";import"./p-7fefc54a.js";import"./p-04d005dd.js";import"./p-04b1a23c.js";const n=class{constructor(e){t(this,e),this.completed=s(this,"completed",7),this.baseUrl="",this.processingRecords=r.dbEProcessingRecordEntry,this.renderedProcessingRecords=this.processingRecords,this.filterSearchProcessingRecords="",this.purposeSelection="default",this.update=0}itemClickHandler(t){this.data.selectedProcessingRecordID=t.detail.selectedItems[0].id,this.update++}itemDeleteHandler(){this.data.selectedProcessingRecordID="",this.update++}extractDataSubjectCategories(t){let s=[];return t.dataSubjectCategoriesAggregate.forEach((t=>{0==s.filter((s=>s.friendlyName===t.dataSubjectCategory.friendlyName)).length&&s.push(t.dataSubjectCategory)})),s}extractPIICategories(t){let s=[];return t.dataSubjectCategoriesAggregate.forEach((t=>{t.dataCategoriesAggregate.forEach((t=>{0==s.filter((s=>s.friendlyName===t.dataCategory.friendlyName)).length&&s.push(t.dataCategory)}))})),s}extractRecipientCategories(t){let s=[];return t.dataSubjectCategoriesAggregate.forEach((t=>{t.dataCategoriesAggregate.forEach((t=>{0==s.filter((s=>s.type===t.recipientCategory.type)).length&&s.push(t.recipientCategory)}))})),s}extractLegalFoundations(t){let s=[];return t.dataSubjectCategoriesAggregate.forEach((t=>{t.dataCategoriesAggregate.forEach((t=>{0==s.filter((s=>s.type===t.lawfulness.type)).length&&s.push(t.lawfulness)}))})),s}componentDidLoad(){this.processingRecords=r.dbEProcessingRecordEntry}componentWillRender(){this.renderedProcessingRecords=this.processingRecords,""!==this.filterSearchProcessingRecords&&(this.renderedProcessingRecords=this.processingRecords.filter((t=>{let s=o.flatten(t);for(let t in s)if(("string"==typeof s[t]||s instanceof String)&&s[t].toLowerCase().includes(this.filterSearchProcessingRecords.toLowerCase()))return!0})))}componentDidRender(){void 0!==this.data.selectedProcessingRecordID&&(this.selectedItem.querySelectorAll("ui5-list[id='select-purpose'] > ui5-li").forEach((t=>{t.selected=!1})),this.selectedItem.querySelector("ui5-li[id='"+this.data.selectedProcessingRecordID+"']").selected=!0)}render(){return e("div",{class:"container-fluid"},e("div",{class:"row shadow p-2 mb-2 bg-white rounded border"},e("div",{class:"col-12"},e("label",null,"Bitte wählen Sie den Zweck oder die Grundlage der geplanten Datenverarbeitungsaktivität aus:*"),e("div",{class:"row"},e("ui5-radiobutton",{text:"Standard (bereits genehmigte Zwecke)",selected:"default"===this.purposeSelection,onSelect:()=>this.purposeSelection="default",name:"GroupPurposeSelection"}),e("ui5-radiobutton",{text:"Neuer Zweck oder Zweck selbst festlegen",selected:"new"===this.purposeSelection,onSelect:()=>this.purposeSelection="new",name:"GroupPurposeSelection"})),"default"===this.purposeSelection?e("div",null,""===this.data.selectedProcessingRecordID?e("div",{class:"col-12 card-block text-center trusd-button-select",onClick:()=>document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")},e("div",{class:"file text-center align-middle"},e("p",null),e("span",{class:"text-primary"},e("i",{class:"fas fa-hand-pointer"}),"  Zweck oder Grundlage auswählen"),e("p",null))):e("div",{class:"row"},e("div",{class:"col"},e("ui5-list",{mode:"Delete"},e("ui5-li",{class:"col-12",selected:!0,description:this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID)).purposes.map((t=>" "+t.displayName))},this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID)).friendlyName))),e("div",{class:"d-flex align-items-center justify-content-center"},e("span",{class:"fas fa-check-circle text-success"})))):e("div",null,e("ui5-messagestrip",{type:"Information","no-icon":!0,"no-close-button":!0},e("p",null,e("b",null,"Hinweis")),"Neue Zwecke müssen durch den Datenschutzbeauftragten geprüft und genehmigt werden. Sie sollten diese Option daher nur wählen, wenn es absolut notwendig ist."),"are you crazy?"),e("trusd-com-modal-window",null,e("span",{slot:"modal-title"},"Verzeichnis von Datenverarbeitungsaktivitäten"),e("div",{slot:"modal-content"},e("div",{class:"d-flex justify-content-center"},e("ui5-input",{onInput:t=>{this.filterSearchProcessingRecords=t.target.value},id:"search-input",placeholder:a.placeholderSearch},e("ui5-icon",{id:"search-input-icon",slot:"icon",name:"search"}))),e("ui5-list",{id:"select-purpose",growing:"Scroll",mode:"SingleSelect"},this.renderedProcessingRecords.map((t=>e("ui5-li",{id:t.id.value,description:t.purposes.map((t=>" "+t.displayName)),info:t.friendlyName.includes("Erfindung")?"häufig verwendet":"","info-state":"Success"},t.friendlyName)))),this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))?e("div",null,"  ",e("p",null),e("div",{class:"bg-light"},e("div",{class:"row"},e("div",{class:"col-12"},e("h5",null,'Übersicht der ausgewählten Verarbeitungstätigkeit "',this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID)).friendlyName,'"'))),e("div",{class:"row"},e("div",{class:"col-sm-3 col-lg-3 text-truncate"},e("p",{class:"text-center"},e("i",{class:"fas fa-user-tag fa-2x tooltips"},e("span",{class:"tooltiptext"},"Kategorien möglicher betroffener Personen"))),(()=>this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))?this.extractDataSubjectCategories(this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))):[])().map((t=>e("li",null,t.friendlyName)))),e("div",{class:"col-sm-3 col-lg-3 text-truncate"},e("p",{class:"text-center"},e("i",{class:"fas fa-table fa-2x tooltips"},e("span",{class:"tooltiptext"},"Kategorien der personenbezogenen Daten"))),(()=>this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))?this.extractPIICategories(this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))):[])().map((t=>e("li",null,t.friendlyName)))),e("div",{class:"col-sm-3 col-lg-3 text-truncate"},e("p",{class:"text-center"},e("i",{class:"fas fa-share-alt fa-2x tooltips"},e("span",{class:"tooltiptext"},"Kategorien möglicher Empfänger"))),(()=>this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))?this.extractRecipientCategories(this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))):[])().map((t=>e("li",null,t.type)))),e("div",{class:"col-sm-3 col-lg-3 text-truncate"},e("p",{class:"text-center"},e("i",{class:"fas fa-gavel fa-2x tooltips"},e("span",{class:"tooltiptext"},"Rechtsgrundlage"))),(()=>this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))?this.extractLegalFoundations(this.processingRecords.find((t=>t.id.value===this.data.selectedProcessingRecordID))):[])().map((t=>e("li",null,t.type))))))):""),e("div",{slot:"modal-footer"},e("button",{type:"button",class:"btn btn-secondary",onClick:()=>{this.data.selectedProcessingRecordID="",document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")}},a.btnCancel)," ",e("button",{type:"button",class:"btn btn-primary",onClick:()=>document.getElementsByTagName("trusd-com-modal-window").item(0).toggleAttribute("open")},a.btnSave))))),e("div",{class:"row shadow p-2 mb-2 bg-white rounded border"},e("div",{class:"col-12"},e("label",null,"Bitte geben Sie der geplanten Datenverarbeitungsaktivität einen Namen:*"),e("div",{class:"row"},e("div",{class:"col"},e("ui5-input",{onChange:t=>{this.data.title=t.target.value,this.update++},id:"title-input",placeholder:"z. B.: Abschlussbericht 2021, Forschungsantrag Projekt"})),""!==this.data.title?e("div",{class:"d-flex align-items-center justify-content-center"},e("span",{class:"fas fa-check-circle text-success"})):""))),e("div",{class:"row shadow p-2 mb-2 bg-white rounded border"},e("div",{class:"col-6"},e("label",null,"Vorlage"),e("div",{class:"d-flex justify-content-center"},e("ui5-input",{id:"search-input",placeholder:a.placeholderSearch},e("ui5-icon",{id:"search-input-icon",slot:"icon",name:"search"}))),e("ui5-list",{id:"select-purpose",growing:"Scroll",mode:"SingleSelect"},this.processingRecords.map((t=>e("ui5-li",{icon:"rhombus-milestone",description:t.purposes.map((t=>" "+t.displayName)),info:t.friendlyName.includes("Erfindung")?"häufig verwendet":"","info-state":"Success"},t.friendlyName))))),e("div",{class:"col-6"},e("div",{class:"row"}),e("div",{class:"row"},e("div",{class:"col-12"},e("label",null,"Zuordnen"),e("ui5-multi-input",{onChange:t=>{this.data.topicAssignments=[...this.data.topicAssignments,t.target.value],this.update++},"show-suggestions":!0,id:"topic-assignments"},e("div",{slot:"valueStateMessage"},"Token is already in the list"),this.data.topicAssignments.map((t=>e("ui5-token",{slot:"tokens",text:t})))))))),e("div",{class:"row pt-3"},e("div",{class:"col d-flex flex-row-reverse bd-highlight"},e("button",{onClick:()=>this.completed.emit(this.data),type:"button",class:"btn btn-success float-right",disabled:""===this.data.title||""===this.data.selectedProcessingRecordID,"data-toggle":"collapse","data-target":".multi-collapse","aria-expanded":"true","aria-controls":"collapseOne collapseTwo"},a.btnNext))))}get selectedItem(){return i(this)}};n.route="/vorlagen/datenkorb",n.style='.tooltips.sc-trusd-piiq-com-data-basket-permission-step-1 .tooltiptext.sc-trusd-piiq-com-data-basket-permission-step-1{font-size:small;visibility:hidden;width:auto;background-color:#EEEEEE;color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute !important;z-index:1000;bottom:100%;left:50%;margin-left:-60px;opacity:0;transition:opacity 1s}.tooltips.sc-trusd-piiq-com-data-basket-permission-step-1 .tooltiptext.sc-trusd-piiq-com-data-basket-permission-step-1::after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:black transparent transparent transparent}.tooltips.sc-trusd-piiq-com-data-basket-permission-step-1:hover .tooltiptext.sc-trusd-piiq-com-data-basket-permission-step-1{visibility:visible;opacity:1;transition:opacity 0s linear 1s;overflow:visible !important}.tooltip-arrow.sc-trusd-piiq-com-data-basket-permission-step-1,.privacy-tooltip.sc-trusd-piiq-com-data-basket-permission-step-1+.tooltip.sc-trusd-piiq-com-data-basket-permission-step-1>.tooltip-inner.sc-trusd-piiq-com-data-basket-permission-step-1{background-color:#0d5c95}.cursor-pointer.sc-trusd-piiq-com-data-basket-permission-step-1{cursor:pointer}.cursor-help.sc-trusd-piiq-com-data-basket-permission-step-1{cursor:help}button.sc-trusd-piiq-com-data-basket-permission-step-1:disabled{cursor:not-allowed;pointer-events:all !important}.sc-trusd-piiq-com-data-basket-permission-step-1-h{display:block}#select-purpose.sc-trusd-piiq-com-data-basket-permission-step-1{height:300px}#search-input.sc-trusd-piiq-com-data-basket-permission-step-1{width:100%}#topic-assignments.sc-trusd-piiq-com-data-basket-permission-step-1{width:100%;height:100%}#title-input.sc-trusd-piiq-com-data-basket-permission-step-1{width:100%}.search-input-icon.sc-trusd-piiq-com-data-basket-permission-step-1{background:#fafafa;color:#0a6ed1;cursor:pointer}.search-input-icon.sc-trusd-piiq-com-data-basket-permission-step-1:hover{background:rgba(224,224,224,0.5)}.card-block.sc-trusd-piiq-com-data-basket-permission-step-1{border:1px solid lightgrey;border-radius:2px !important;background-color:#FAFAFA;padding:10px}.trusd-button-select.sc-trusd-piiq-com-data-basket-permission-step-1:hover{cursor:pointer;border:1px solid #007BFF}';export{n as trusd_piiq_com_data_basket_permission_step_1}